<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1b2636">
    <title>ASRS Runway Incursion Analysis Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>ASRS Runway Incursion Data Visualization</h1>
        <div class="theme-toggle">
            <div class="theme-toggle-icon" id="theme-toggle-btn">
                <span id="theme-icon">☀️</span>
            </div>
            <span class="theme-label" id="theme-label">Switch to Dark Mode</span>
        </div>
    </header>
    
    <main>
        <!-- Page 1: Filters -->
        <div id="filters-page" class="page active">
            <section class="date-selector">
                <h2>Select Date Range</h2>
                <div class="date-inputs">
                    <div class="date-group">
                        <label for="start-month">Start Month:</label>
                        <select id="start-month">
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    
                    <div class="date-group">
                        <label for="start-year">Start Year:</label>
                        <select id="start-year"></select>
                    </div>
                    
                    <div class="date-group">
                        <label for="end-month">End Month:</label>
                        <select id="end-month">
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    
                    <div class="date-group">
                        <label for="end-year">End Year:</label>
                        <select id="end-year"></select>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h3>Filter by State (Optional)</h3>
                    <div class="state-selector">
                        <div class="state-filter-toggle">
                            <input type="checkbox" id="enable-state-filter" />
                            <label for="enable-state-filter">Enable State Filtering</label>
                        </div>
                        <div id="states-container" class="states-container">
                            <div class="search-container">
                                <input type="text" id="state-search" placeholder="Search states..." />
                                <div class="state-control-buttons">
                                    <button type="button" id="select-all-states" class="secondary-btn">Select All</button>
                                    <button type="button" id="clear-all-states" class="secondary-btn">Clear All</button>
                                </div>
                            </div>
                            <div class="selected-states-container">
                                <h4>Selected States: <span id="selected-count">0</span></h4>
                                <div id="selected-states-chips" class="selected-states-chips"></div>
                            </div>
                            <div id="state-search-results" class="state-search-results"></div>
                        </div>
                    </div>
                </div>
                
                <button id="generate-btn">Generate Visualizations</button>
                <div id="loading" class="hidden">Generating visualizations... Please wait.</div>
            </section>
        </div>
        
        <!-- Page 2: Visualizations -->
        <div id="visualizations-page" class="page">
            <div class="page-navigation">
                <button id="back-to-filters" class="back-btn">
                    <span class="back-icon">←</span> Back to Filters
                </button>
                <div id="current-filters-summary" class="filters-summary"></div>
                <div class="nav-buttons-group">
                    <button id="next-to-berttopic" class="next-btn">
                        BERTopic <span class="next-icon">→</span>
                    </button>
                    <button id="next-to-lda" class="next-btn">
                        LDA <span class="next-icon">→</span>
                    </button>
                </div>
            </div>
            
            <section class="visualizations">
                <div class="viz-container">
                    <h2 id="contributing-factors-title">Contributing Factors / Situations</h2>
                    <div id="contributing-factors-viz" class="viz-placeholder">
                        <p>Generating visualizations...</p>
                    </div>
                </div>
                
                <div class="viz-container">
                    <h2 id="human-factors-title">Human Factors</h2>
                    <div id="human-factors-viz" class="viz-placeholder">
                        <p>Generating visualizations...</p>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Page 3: BERTopic Visualizations -->
        <div id="berttopic-page" class="page">
            <div class="page-navigation">
                <button id="back-to-visualizations" class="back-btn">
                    <span class="back-icon">←</span> Back to Visualizations
                </button>
                <div id="berttopic-filters-summary" class="filters-summary"></div>
                <div class="nav-buttons-group">
                    <button id="berttopic-to-lda" class="next-btn">
                        LDA <span class="next-icon">→</span>
                    </button>
                </div>
            </div>
            
            <section class="berttopic-visualizations">
                <div class="berttopic-options">
                    <h2>BERTopic Visualizations</h2>
                    <div class="berttopic-selector">
                        <label for="berttopic-select">Select BERTopic Model:</label>
                        <select id="berttopic-select">
                            <option value="6">6 Topics (2012-2017)</option>
                            <option value="21">21 Topics (2012-2017)</option>
                            <option value="6_2018_to_2025">6 Topics (2018-2025)</option>
                            <option value="6_2001_to_2025">6 Topics (2001-2025)</option>
                        </select>
                    </div>
                </div>
                
                <div class="berttopic-container">
                    <div id="berttopic-viz" class="berttopic-viz">
                        <iframe id="berttopic-iframe" src="" frameborder="0"></iframe>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Page 4: LDA Visualizations -->
        <div id="lda-page" class="page">
            <div class="page-navigation">
                <button id="back-to-visualizations-from-lda" class="back-btn">
                    <span class="back-icon">←</span> Back to Visualizations
                </button>
                <div id="lda-filters-summary" class="filters-summary"></div>
                <div class="nav-buttons-group">
                    <button id="lda-to-berttopic" class="next-btn">
                        BERTopic <span class="next-icon">→</span>
                    </button>
                </div>
            </div>
            
            <section class="lda-visualizations">
                <div class="lda-options">
                    <h2>LDA Topic Modeling Visualizations</h2>
                    <div class="lda-selector">
                        <label for="lda-select">Select LDA Time Period:</label>
                        <select id="lda-select">
                            <option value="2012_to_2017">2012-2017</option>
                            <option value="2018_to_2025">2018-2025</option>
                            <option value="2001_to_2025">2001-2025 (All Years)</option>
                        </select>
                    </div>
                </div>
                
                <div class="lda-container">
                    <div id="lda-viz" class="lda-viz">
                        <iframe id="lda-iframe" src="" frameborder="0"></iframe>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <footer>
        <p>ASRS Runway Incursion Data Analysis Tool</p>
    </footer>
    
    <script src="script.js"></script>
</body>
</html> 